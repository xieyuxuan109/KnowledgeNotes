### 先创建/etc/containerd/certs.d/
```
/etc/containerd/certs.d/
├── docker.io/
│   └── hosts.toml
└── registry.k8s.io/
    └── hosts.toml
```
```
mkdir -p /etc/containerd/certs.d/docker.io
vim /etc/containerd/certs.d/docker.io/hosts.toml
```
```
server = "https://registry-1.docker.io"

[host."https://fjfumy9u.mirror.aliyuncs.com"]
  capabilities = ["pull", "resolve"]

[host."https://docker.m.daocloud.io"]
  capabilities = ["pull", "resolve"]

[host."https://docker.mirrors.tuna.tsinghua.edu.cn"]
  capabilities = ["pull", "resolve"]
```
```
mkdir -p /etc/containerd/certs.d/registry.k8s.io
vim /etc/containerd/certs.d/registry.k8s.io/hosts.toml
```
```
server = "https://registry.k8s.io"

[host."https://registry.aliyuncs.com/google_containers"]
  capabilities = ["pull", "resolve"]

[host."https://k8s.m.daocloud.io"]
  capabilities = ["pull", "resolve"]
```
```
mkdir -p /etc/containerd/certs.d/quay.io
vim /etc/containerd/certs.d/quay.io/hosts.toml
```
```
quay.io（很多开源项目用）
server = "https://quay.io"

[host."https://quay.m.daocloud.io"]
  capabilities = ["pull", "resolve"]
```
```
ghcr.io（GitHub Container Registry）很多新项目在这里
mkdir -p /etc/containerd/certs.d/ghcr.io
vim /etc/containerd/certs.d/ghcr.io/hosts.toml
```

### 检查/etc/containerd/config.toml里面是不是同时配置了registry.mirrors和config_path = "/etc/containerd/certs.d，如果同时配置，需要删除前面一个
```
/etc/containerd/config.toml
```
```
找到/etc/containerd/config.toml里面添加config_path
[plugins."io.containerd.grpc.v1.cri".registry]
  config_path = "/etc/containerd/certs.d"
```
```
systemctl daemon-reload
systemctl restart containerd
```
